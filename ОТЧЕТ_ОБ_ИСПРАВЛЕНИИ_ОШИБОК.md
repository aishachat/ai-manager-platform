# üîß –û–¢–ß–ï–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –û–®–ò–ë–û–ö –í –°–ö–†–ò–ü–¢–ê–•

## üö® –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –û–®–ò–ë–ö–ò

### 1. –û—à–∏–±–∫–∞ –≤ –®–ê–ì 8 (conversations):
```
ERROR: 42703: column "dialog_id" does not exist
LINE 103: WHERE dialog_id IS NOT NULL
```
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –∫–æ–ª–æ–Ω–∫–∏ `dialog_id` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 2. –û—à–∏–±–∫–∞ –≤ –®–ê–ì 9 (chat_messages):
```
ERROR: 42703: column "dialog_id" does not exist
LINE 109: WHERE dialog_id IS NOT NULL
```
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –∫–æ–ª–æ–Ω–∫–∏ `dialog_id` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 3. –û—à–∏–±–∫–∞ –≤ autoswitch_settings:
```
ERROR: 22P02: invalid input syntax for type bigint: "–°–º. –Ω–∏–∂–µ"
LINE 31: '–°–º. –Ω–∏–∂–µ' as value;
```
**–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ–ø—ã—Ç–∫–∞ –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ —á–∏—Å–ª–æ–≤–æ–µ –ø–æ–ª–µ

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_AUTOSWITCH_SETTINGS.sql`:
- ‚ùå –£–±—Ä–∞–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `'–°–º. –Ω–∏–∂–µ' as value`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ `count(*)::text as value`

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `–®–ê–ì_8_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_CONVERSATIONS.sql`:
- ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `dialog_id`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `–®–ê–ì_9_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_CHAT_MESSAGES.sql`:
- ‚ùå –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `dialog_id` –∏ `conversation_id`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 4. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_–ü–†–û–°–¢–ê–Ø.sql`:
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö UNION
- ‚úÖ –ë–µ–∑ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –∫–æ–ª–æ–Ω–æ–∫
- ‚úÖ –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ information_schema

## üéØ –¢–ï–ö–£–©–ò–ô –ü–õ–ê–ù

### 1. –°–ï–ô–ß–ê–° - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
- –í—ã–ø–æ–ª–Ω–∏—Ç—å `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_–ü–†–û–°–¢–ê–Ø.sql`
- –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –µ—Å—Ç—å –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ

### 2. –ü–û–°–õ–ï –ü–†–û–í–ï–†–ö–ò - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –£—á–µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Å–≤—è–∑–µ–π (project_id, user_id, owner_id)
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–¥ –∫–∞–∂–¥—É—é —Ç–∞–±–ª–∏—Ü—É

### 3. –ü–û–®–ê–ì–û–í–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
- –ò—Å–ø—Ä–∞–≤–ª—è—Ç—å RLS –ø–æ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–π

## üìã –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´

1. ‚úÖ `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_AUTOSWITCH_SETTINGS.sql` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å —Ç–∏–ø–æ–º –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ `–®–ê–ì_8_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_CONVERSATIONS.sql` - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ dialog_id
3. ‚úÖ `–®–ê–ì_9_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_CHAT_MESSAGES.sql` - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ dialog_id
4. ‚úÖ `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_–ü–†–û–°–¢–ê–Ø.sql` - –Ω–æ–≤—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
5. ‚úÖ `–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–ü–†–û–í–ï–†–ö–ò_–°–¢–†–£–ö–¢–£–†–´_–ü–†–û–°–¢–ê–Ø.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì
**–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_–ü–†–û–°–¢–ê–Ø.sql` –≤ Supabase SQL Editor**

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–æ–∫. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —è —Å–æ–∑–¥–∞–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã.
