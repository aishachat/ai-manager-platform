# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï RLS

## ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê:**
–§—É–Ω–∫—Ü–∏—è `get_user_project_id()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` - —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **–í–°–ï –ø–æ–ª–∏—Ç–∏–∫–∏ —Å project_id –ù–ï –†–ê–ë–û–¢–ê–Æ–¢!**

## üéØ **–ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

### **–®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é get_user_project_id()**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–§–£–ù–ö–¶–ò–ò_GET_USER_PROJECT_ID.sql`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç UUID (–Ω–µ null)

### **–®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–í–°–ï–•_–ü–û–õ–ò–¢–ò–ö.sql`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `null_condition_policies: 0`

## üîç **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—Å—è:**

### **1. –§—É–Ω–∫—Ü–∏—è get_user_project_id():**
- **–ë—ã–ª–æ**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`
- **–°—Ç–∞–Ω–µ—Ç**: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç UUID –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–õ–æ–≥–∏–∫–∞**: –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞ - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π

### **2. –í—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–ª—É—á–∞—Ç WHERE —É—Å–ª–æ–≤–∏—è:**
- **SELECT –ø–æ–ª–∏—Ç–∏–∫–∏**: `USING (project_id = get_user_project_id())`
- **UPDATE –ø–æ–ª–∏—Ç–∏–∫–∏**: `USING (project_id = get_user_project_id())`
- **DELETE –ø–æ–ª–∏—Ç–∏–∫–∏**: `USING (project_id = get_user_project_id())`

## üìä **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå **–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null**
- ‚ùå **17 –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑ WHERE —É—Å–ª–æ–≤–∏–π**
- ‚ùå **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç UUID**
- ‚úÖ **0 –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑ WHERE —É—Å–ª–æ–≤–∏–π**
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ**

## üöÄ **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:**

1. **–°–Ω–∞—á–∞–ª–∞**: `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–§–£–ù–ö–¶–ò–ò_GET_USER_PROJECT_ID.sql`
2. **–ü–æ—Ç–æ–º**: `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–í–°–ï–•_–ü–û–õ–ò–¢–ò–ö.sql`

## ‚ö†Ô∏è **–í–ê–ñ–ù–û:**
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ **–í–°–ï –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç –ø—Ä–æ–µ–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

**–ì–æ—Ç–æ–≤—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É?** üö®
