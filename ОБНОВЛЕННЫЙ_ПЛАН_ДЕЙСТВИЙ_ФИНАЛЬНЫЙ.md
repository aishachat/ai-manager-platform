# üìã –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô (–§–ò–ù–ê–õ–¨–ù–´–ô)

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò

### ‚úÖ –û—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- **–í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü —Å user_id**: 32
- **–¢–∞–±–ª–∏—Ü —Å user_id —Ç–∏–ø–∞ uuid**: 29 ‚úÖ
- **–¢–∞–±–ª–∏—Ü —Å user_id —Ç–∏–ø–∞ text**: 3 ‚ùå
- **–í—Å–µ project_id –∏–º–µ—é—Ç —Ç–∏–ø uuid**: ‚úÖ

### üö® –¢—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (3 —Ç–∞–±–ª–∏—Ü—ã):
1. **`messenger_contacts`** - `user_id` —Ç–∏–ø–∞ `text` ‚ùå
2. **`notifications`** - `user_id` —Ç–∏–ø–∞ `text` ‚ùå  
3. **`widget_development_settings`** - `user_id` —Ç–∏–ø–∞ `text` ‚ùå

## üîß –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –®–ê–ì 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–¢–ò–ü–û–í_–î–ê–ù–ù–´–•_USER_ID_–û–ë–ù–û–í–õ–ï–ù–ù–´–ô.sql
```

### –®–ê–ì 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
1. **`–®–ê–ì_15_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_WIDGET_DEVELOPMENT_SETTINGS_–§–ò–ù–ê–õ–¨–ù–´–ô.sql`** - –¥–ª—è `widget_development_settings`
2. **`–®–ê–ì_16_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_TELEGRAM_SETTINGS_–ü–†–û–ï–ö–¢.sql`** - –¥–ª—è `telegram_settings`
3. **`–®–ê–ì_18_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_KNOWLEDGE_SOURCES_–ë–ï–ó_–û–®–ò–ë–û–ö.sql`** - –¥–ª—è `knowledge_sources`
4. **`–®–ê–ì_19_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_KNOWLEDGE_CHUNKS_–ë–ï–ó_–û–®–ò–ë–û–ö.sql`** - –¥–ª—è `knowledge_chunks`

### –®–ê–ì 3: –°–æ–∑–¥–∞—Ç—å RLS –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
5. **`–®–ê–ì_20_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_MESSENGER_CONTACTS_–ü–†–û–ï–ö–¢.sql`** - –¥–ª—è `messenger_contacts`
6. **`–®–ê–ì_21_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_NOTIFICATIONS_–ü–†–û–ï–ö–¢.sql`** - –¥–ª—è `notifications`
7. **`–®–ê–ì_22_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_CRM_CLIENTS_–ü–†–û–ï–ö–¢.sql`** - –¥–ª—è `crm_clients`
8. **`–®–ê–ì_23_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_CRM_DEALS_–ü–†–û–ï–ö–¢.sql`** - –¥–ª—è `crm_deals`
9. **`–®–ê–ì_24_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_CRM_OPERATORS_–ü–†–û–ï–ö–¢.sql`** - –¥–ª—è `crm_operators`

## üöÄ –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –î–ï–ô–°–¢–í–ò–ô

### –ù–ï–ú–ï–î–õ–ï–ù–ù–û:
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–¢–ò–ü–û–í_–î–ê–ù–ù–´–•_USER_ID_–û–ë–ù–û–í–õ–ï–ù–ù–´–ô.sql`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ user_id –∏–º–µ—é—Ç —Ç–∏–ø uuid

### –ü–û–°–õ–ï –£–°–ü–ï–•–ê:
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≥–æ—Ç–æ–≤—ã–µ RLS —Å–∫—Ä–∏–ø—Ç—ã
2. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã

## üí° –í–ê–ñ–ù–û

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –í—Å–µ `user_id` –±—É–¥—É—Ç –∏–º–µ—Ç—å —Ç–∏–ø `uuid`
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ JOIN –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ API –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –±—É–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ–π

### **–õ–æ–≥–∏–∫–∞ RLS:**
- **PROJECT_ID –ª–æ–≥–∏–∫–∞** –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- **USER_ID –ª–æ–≥–∏–∫–∞** –¥–ª—è –ª–∏—á–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **OWNER_ID –ª–æ–≥–∏–∫–∞** –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- **–°–ø—Ä–∞–≤–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞** –¥–ª—è –æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìû –¢–†–ï–ë–£–ï–¢–°–Ø –î–ï–ô–°–¢–í–ò–ï

### **–°–ï–ô–ß–ê–°:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–¢–ò–ü–û–í_–î–ê–ù–ù–´–•_USER_ID_–û–ë–ù–û–í–õ–ï–ù–ù–´–ô.sql`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. –°–æ–æ–±—â–∏—Ç—å –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

### **–ü–û–°–õ–ï –£–°–ü–ï–•–ê:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≥–æ—Ç–æ–≤—ã–µ RLS —Å–∫—Ä–∏–ø—Ç—ã
2. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ç–∏–ø–æ–≤
- ‚úÖ API —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

**–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã!** üö®
