# üìä –ê–ù–ê–õ–ò–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –ü–†–û–í–ï–†–ö–ò –¢–ò–ü–û–í

## ‚úÖ –û–¢–õ–ò–ß–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´!

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ —Ç–∞–±–ª–∏—Ü —Å user_id**: 32
- **–¢–∞–±–ª–∏—Ü —Å user_id —Ç–∏–ø–∞ uuid**: 29 ‚úÖ
- **–¢–∞–±–ª–∏—Ü —Å user_id —Ç–∏–ø–∞ text**: 3 ‚ùå
- **–¢–∞–±–ª–∏—Ü —Å user_id —Ç–∏–ø–∞ character varying**: 0 ‚úÖ

### –í—Å–µ project_id –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø uuid ‚úÖ

## üö® –¢–ê–ë–õ–ò–¶–´ –¢–†–ï–ë–£–Æ–©–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 3 —Ç–∞–±–ª–∏—Ü—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–æ–º user_id (text):

1. **`messenger_contacts`** - `user_id` —Ç–∏–ø–∞ `text` ‚ùå
2. **`notifications`** - `user_id` —Ç–∏–ø–∞ `text` ‚ùå  
3. **`widget_development_settings`** - `user_id` —Ç–∏–ø–∞ `text` ‚ùå

## üîß –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ù–ï–ú–ï–î–õ–ï–ù–ù–û –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:

```sql
-- 1. messenger_contacts
ALTER TABLE public.messenger_contacts 
ALTER COLUMN user_id TYPE uuid USING user_id::uuid;

-- 2. notifications  
ALTER TABLE public.notifications 
ALTER COLUMN user_id TYPE uuid USING user_id::uuid;

-- 3. widget_development_settings
ALTER TABLE public.widget_development_settings 
ALTER COLUMN user_id TYPE uuid USING user_id::uuid;
```

## üéØ –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å:
- ‚úÖ `user_id` —Ç–∏–ø–∞ `uuid`
- ‚úÖ `project_id` —Ç–∏–ø–∞ `uuid` 
- ‚úÖ `owner_id` —Ç–∏–ø–∞ `uuid`

### –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç:
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É RLS –ø–æ–ª–∏—Ç–∏–∫
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –≤ JOIN –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É API

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è 3 —Ç–∞–±–ª–∏—Ü
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏:
- –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤
- –£–±—Ä–∞—Ç—å `::text` –∏ `::uuid` –∏–∑ JOIN –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è `user_id = auth.uid()`

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É RLS –ø–æ–ª–∏—Ç–∏–∫
- –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ—à–∏–±–æ–∫
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –∑–∞–ø—Ä–æ—Å—ã

## üí° –í–ê–ñ–ù–û

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:**
- –í—Å–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–µ –±—É–¥–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ç–∏–ø–æ–≤
- API –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –±—É–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ–π

**–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã!** üö®
