# üîç –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –°–¢–†–£–ö–¢–£–†–´ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø)

## üéØ –¶–ï–õ–¨
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –±–µ–∑ –æ—à–∏–±–æ–∫.

## üö® –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´
- ‚ùå –£–±—Ä–∞–Ω–∞ –æ—à–∏–±–∫–∞ —Å `dialog_id` –≤ –®–ê–ì 8 –∏ –®–ê–ì 9
- ‚ùå –£–±—Ä–∞–Ω–∞ –æ—à–∏–±–∫–∞ —Å `"–°–º. –Ω–∏–∂–µ"` –≤ autoswitch_settings
- ‚úÖ –°–æ–∑–¥–∞–Ω –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö UNION –∑–∞–ø—Ä–æ—Å–æ–≤

## üöÄ –í–´–ü–û–õ–ù–ï–ù–ò–ï

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç Supabase
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **SQL Editor**

### 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ—Å—Ç—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_–ü–†–û–°–¢–ê–Ø.sql`
- –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
- –ù–∞–∂–º–∏—Ç–µ **Run** –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 3. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã —É–≤–∏–¥–∏—Ç–µ:

#### ‚úÖ –°–¢–†–£–ö–¢–£–†–ê –ö–ê–ñ–î–û–ô –¢–ê–ë–õ–ò–¶–´
- `ai_agent_settings` - –∫–æ–ª–æ–Ω–∫–∏ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- `autoswitch_settings` - –∫–æ–ª–æ–Ω–∫–∏ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö  
- `dialogs` - –∫–æ–ª–æ–Ω–∫–∏ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- `conversations` - –∫–æ–ª–æ–Ω–∫–∏ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- `chat_messages` - –∫–æ–ª–æ–Ω–∫–∏ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

#### ‚úÖ –¢–ê–ë–õ–ò–¶–´ –° PROJECT_ID
- –ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç –∫–æ–ª–æ–Ω–∫—É `project_id`
- –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö —ç—Ç–æ–π –∫–æ–ª–æ–Ω–∫–∏

#### ‚úÖ –¢–ê–ë–õ–ò–¶–´ –° USER_ID
- –ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç –∫–æ–ª–æ–Ω–∫—É `user_id`
- –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö —ç—Ç–æ–π –∫–æ–ª–æ–Ω–∫–∏

#### ‚úÖ –¢–ê–ë–õ–ò–¶–´ –° OWNER_ID
- –ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç –∫–æ–ª–æ–Ω–∫—É `owner_id`
- –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö —ç—Ç–æ–π –∫–æ–ª–æ–Ω–∫–∏

## üîç –ß–¢–û –ò–°–ö–ê–¢–¨

### –î–ª—è —Ç–∞–±–ª–∏—Ü —Å `project_id`:
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–∏—Ç–∏–∫—É: `project_id IN (SELECT id FROM projects WHERE owner_id = auth.uid())`

### –î–ª—è —Ç–∞–±–ª–∏—Ü —Å `user_id`:
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–∏—Ç–∏–∫—É: `user_id = auth.uid()`

### –î–ª—è —Ç–∞–±–ª–∏—Ü —Å `owner_id`:
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–∏—Ç–∏–∫—É: `owner_id = auth.uid()`

### –î–ª—è —Ç–∞–±–ª–∏—Ü –±–µ–∑ —ç—Ç–∏—Ö –∫–æ–ª–æ–Ω–æ–∫:
- –ù—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É —Å–≤—è–∑–∏ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è —Å–≤—è–∑–∏

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò
–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
1. –ò—Å–ø—Ä–∞–≤–ª—é —Å–∫—Ä–∏–ø—Ç—ã –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
2. –°–æ–∑–¥–∞–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º –∫–∞–∂–¥—É—é —Ç–∞–±–ª–∏—Ü—É –æ—Ç–¥–µ–ª—å–Ω–æ

## üÜò –í–ê–ñ–ù–û
–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–æ–∫!
