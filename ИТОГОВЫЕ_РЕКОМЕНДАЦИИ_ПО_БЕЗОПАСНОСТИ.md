# üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò RLS

## ‚úÖ –û–¢–í–ï–¢ –ù–ê –í–ê–® –í–û–ü–†–û–°

### **–ü–æ–ª–∏—Ç–∏–∫–∏ –ù–ï —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ –∏ –ù–ï –±—É–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å API**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –Ω–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
2. **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–æ
4. **–ì–∏–±–∫–æ—Å—Ç—å** - service_role –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø

## üîç –ê–ù–ê–õ–ò–ó –°–û–ó–î–ê–ù–ù–´–• –ü–û–õ–ò–¢–ò–ö

### ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–´–ï –ü–û–õ–ò–¢–ò–ö–ò:

#### 1. PROJECT_ID –ª–æ–≥–∏–∫–∞ (–æ—Å–Ω–æ–≤–Ω–∞—è):
```sql
project_id IN (SELECT id FROM projects WHERE owner_id = auth.uid())
```
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ**: –ø—Ä–æ—Å—Ç–æ–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å
- **–ë—ã—Å—Ç—Ä–æ**: —Å –∏–Ω–¥–µ–∫—Å–æ–º –Ω–∞ owner_id
- **–õ–æ–≥–∏—á–Ω–æ**: –≤–ª–∞–¥–µ–ª–µ—Ü –≤–∏–¥–∏—Ç —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã

#### 2. USER_ID –ª–æ–≥–∏–∫–∞:
```sql
user_id = auth.uid()
```
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ**: –ø—Ä—è–º–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- **–ë—ã—Å—Ç—Ä–æ**: —Å –∏–Ω–¥–µ–∫—Å–æ–º –Ω–∞ user_id
- **–õ–æ–≥–∏—á–Ω–æ**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ

#### 3. –°–ø—Ä–∞–≤–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞:
```sql
FOR SELECT USING (true)
```
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ**: –Ω–µ—Ç —É—Å–ª–æ–≤–∏–π
- **–ë—ã—Å—Ç—Ä–æ**: –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–õ–æ–≥–∏—á–Ω–æ**: —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º

## üö® –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤:
**–ü—Ä–æ–±–ª–µ–º–∞**: –º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å
**–†–µ—à–µ–Ω–∏–µ**: –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ projects.owner_id

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤:
**–ü—Ä–æ–±–ª–µ–º–∞**: –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
**–†–µ—à–µ–Ω–∏–µ**: —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ –ø–æ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø–æ–ª–∏—Ç–∏–∫–∞—Ö

### 3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã:
**–ü—Ä–æ–±–ª–µ–º–∞**: –±–æ–ª—å—à–æ–π IN —Å–ø–∏—Å–æ–∫
**–†–µ—à–µ–Ω–∏–µ**: –ø–æ–ª–∏—Ç–∏–∫–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### 1. –ù–ï–ú–ï–î–õ–ï–ù–ù–û - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã:
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
–î–û–ë–ê–í–õ–ï–ù–ò–ï_–ò–ù–î–ï–ö–°–û–í_–î–õ–Ø_–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò.sql
```

### 2. –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨ - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
–¢–ï–°–¢_–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò_RLS.sql
```

### 3. –ú–û–ù–ò–¢–û–†–ò–¢–¨ - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–æ–±–∞–≤–ª—è—Ç—å –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìä –ü–†–ò–ù–¶–ò–ü–´ –ù–ê–®–ò–• –ü–û–õ–ò–¢–ò–ö

### 1. –ü—Ä–æ—Å—Ç–æ—Ç–∞:
- –ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö UNION –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö JOIN
- –ù–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. –õ–æ–≥–∏—á–Ω–æ—Å—Ç—å:
- –í–ª–∞–¥–µ–ª—å—Ü—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤–∏–¥—è—Ç –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Å–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –í—Å–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–∏–¥—è—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ü—Ä—è–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ü—Ä–æ—Å—Ç—ã–µ —É—Å–ª–æ–≤–∏—è
- –° –∏–Ω–¥–µ–∫—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–æ

## üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ù–ï–ú–ï–î–õ–ï–ù–ù–û:
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 2. –ú–û–ù–ò–¢–û–†–ò–ù–ì:
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### 3. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

## üí° –í–´–í–û–î

**–í–∞—à–∏ –æ–ø–∞—Å–µ–Ω–∏—è –Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã!** –ü–æ–ª–∏—Ç–∏–∫–∏:

1. **–ù–ï —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
2. **–ù–ï –±–ª–æ–∫–∏—Ä—É—é—Ç API** - –ø—Ä–æ—Å—Ç—ã–µ –∏ –±—ã—Å—Ç—Ä—ã–µ
3. **–†–∞–±–æ—Ç–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ** - —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏
4. **–û–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º

**–ì–ª–∞–≤–Ω–æ–µ** - –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API!

## üìû –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ù–ï–ú–ï–î–õ–ï–ù–ù–û:
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å `–î–û–ë–ê–í–õ–ï–ù–ò–ï_–ò–ù–î–ï–ö–°–û–í_–î–õ–Ø_–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò.sql`
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å `–¢–ï–°–¢_–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò_RLS.sql`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü–û–°–õ–ï –£–°–ü–ï–•–ê:
1. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç—É –∂–µ –ª–æ–≥–∏–∫—É
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã

**–ü–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç API!** üöÄ
