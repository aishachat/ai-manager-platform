# üö® –û–¢–ß–ï–¢ –û –ü–†–û–ë–õ–ï–ú–ï –°–¢–†–£–ö–¢–£–†–´ –¢–ê–ë–õ–ò–¶

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- **–®–ê–ì 1-4**: –£—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã RLS –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:
  - `users` - ‚úÖ –ì–æ—Ç–æ–≤–æ
  - `projects` - ‚úÖ –ì–æ—Ç–æ–≤–æ  
  - `project_members` - ‚úÖ –ì–æ—Ç–æ–≤–æ
  - `assistants` - ‚úÖ –ì–æ—Ç–æ–≤–æ

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê –û–ë–ù–ê–†–£–ñ–ï–ù–ê
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å RLS –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `autoswitch_settings` –ø–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞:
```
ERROR: 42703: column "project_id" does not exist
```

## üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ** –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ç–∞–±–ª–∏—Ü
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `project_id`** –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
3. **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏** —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

### –í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
- –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∫–æ–ª–æ–Ω–∫—É `user_id` –≤–º–µ—Å—Ç–æ `project_id`
- –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∫–æ–ª–æ–Ω–∫—É `owner_id` –≤–º–µ—Å—Ç–æ `project_id`
- –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥—Ä—É–≥—É—é –ª–æ–≥–∏–∫—É —Å–≤—è–∑–∏ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–æ–π (–±–µ–∑ RLS)

## üéØ –ü–õ–ê–ù –†–ï–®–ï–ù–ò–Ø

### 1. –ü–†–û–í–ï–†–ö–ê –°–¢–†–£–ö–¢–£–†–´ (–°–ï–ô–ß–ê–°)
- –í—ã–ø–æ–ª–Ω–∏—Ç—å `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_–ö–†–ò–¢–ò–ß–ù–´–•_–¢–ê–ë–õ–ò–¶.sql`
- –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –µ—Å—Ç—å –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ

### 2. –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–ö–†–ò–ü–¢–û–í
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –£—á–µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Å–≤—è–∑–µ–π (project_id, user_id, owner_id)
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–¥ –∫–∞–∂–¥—É—é —Ç–∞–±–ª–∏—Ü—É

### 3. –ü–û–®–ê–ì–û–í–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï
- –ò—Å–ø—Ä–∞–≤–ª—è—Ç—å RLS –ø–æ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–π

## üìã –ö–†–ò–¢–ò–ß–ù–´–ï –¢–ê–ë–õ–ò–¶–´ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò

### –§–ê–ó–ê 1: –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
1. `ai_agent_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AI –∞–≥–µ–Ω—Ç–∞
2. `autoswitch_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
3. `dialogs` - –¥–∏–∞–ª–æ–≥–∏ –ø—Ä–æ–µ–∫—Ç–∞
4. `conversations` - —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –≤ –¥–∏–∞–ª–æ–≥–∞—Ö
5. `chat_messages` - —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö

### –§–ê–ó–ê 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
6. `widget_development_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–∞
7. `telegram_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram
8. `bot_corrections` - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –±–æ—Ç–∞

### –§–ê–ó–ê 3: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
9. `knowledge_sources` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–Ω–∞–Ω–∏–π
10. `knowledge_chunks` - —á–∞–Ω–∫–∏ –∑–Ω–∞–Ω–∏–π

### –§–ê–ó–ê 4: –ù–∏—à–∏
11. `niches` - –Ω–∏—à–∏
12. `niche_synonyms` - —Å–∏–Ω–æ–Ω–∏–º—ã –Ω–∏—à
13. `user_niches` - —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–∏—à–∞–º–∏

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ù–ï–ú–ï–î–õ–ï–ù–ù–û:
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
2. –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
3. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü–û–°–õ–ï –ü–†–û–í–ï–†–ö–ò:
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
2. –ù–∞—á–∞—Ç—å –ø–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é —Ç–∞–±–ª–∏—Ü—É –æ—Ç–¥–µ–ª—å–Ω–æ

## ‚ö†Ô∏è –í–ê–ñ–ù–û
**–ù–ï –í–´–ü–û–õ–ù–Ø–ô–¢–ï** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã!

## üìû –¢–†–ï–ë–£–ï–¢–°–Ø –î–ï–ô–°–¢–í–ò–ï
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `–ü–†–û–í–ï–†–ö–ê_–°–¢–†–£–ö–¢–£–†–´_–ö–†–ò–¢–ò–ß–ù–´–•_–¢–ê–ë–õ–ò–¶.sql` –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
